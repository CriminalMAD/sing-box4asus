Скрипт для запуска sing-box на роутерах Asus с прошивкой Мерлина.
Сначала читаем ридми до конца, потом приступаем к действиям.

I. Нюансы.
1.Вы должны уметь составлять, ну или хотя бы править под себя конфиги для sing-box. Документация https://sing-box.sagernet.org/. Шаблон моего конфига устанавливается вместе со скриптом sing-box.
2.Прописывание DNS серверов в конфиге для роутера ломает правила маршрутизации, прописанные в данном конфиге. Но, у меня нормально работает и без прописывания DNS серверов- используется dns, настроенный в роутере.
3.У вас в роутере должна быть примонтированная флешка с установленным на ней Entware, куда мы будем ставить sing-box со всем необходимым. Установка во внутреннюю память роутера не желательна, а часто и невозможна из-за её ограничений, и не рассматривается.
4.Можете экспериментировать со скриптом и конфигами. Если добьётесь заслуживающих внимания успехов, например победите указанные выше нюансы, поделитесь ими со мной https://4pda.to/forum/index.php?showuser=1525408, пожалуйста.

II. Установка sing-box.
Выполните в консоли роутера команду:

В конце установки выводится полный список команд управления скриптом sing-box. Сохраните их для себя.

III. Что изменить вручную перед первоначальной настройкой скрипта sing-box.
1.После установки sing-box, в директории /root/ вашей примонтированной флешки с Entware, появилась директория /sing-box/. В ней есть шаблон моего конфига config.json. Прежде чем запускать первоначальную настройку скрипта sing-box, вы, как минимум, должны вписать в поля с иксами шаблона конфига свои значения, или вообще заменить конфиг на свой, с учётом указанных выше нюансов. Обратите внимание, что в нём используется мой личный рулсет, загружаемый с моей страницы гитхаба (https://github.com/Dr4tez/my_domains), в нём может не быть нужных вам заблокированных доменов, а трафик по умолчанию идёт в директ.
2.По умолчанию устанавливается последний стабильный релиз sing-box. Если хотите другую версию, можете заменить файл sing-box в директории /sing-box/ на нужный вам, только не забудьте дать ему права на выполнение и, при необходимости, изменить конфиг согласно разделу Migration (https://sing-box.sagernet.org/migration/) в документации sing-box.

IV. Первоначальная настройка скрипта.
Перед первым стартом sing-box, после выполнения предыдущих пунктов, обязательно выполните настройку скрипта! Для этого необходимо запустить в консоли роутера команду
***/sing-box/sing-box.sh setup
и выбирать из вариантов, предлагаемых в процессе работы скрипта. В поле ввода ip адресов устройств обязательно вбейте свои. Номер таблицы маршрутизации можете оставить существующий 222. На остальные вопросы, если не особо понимаете что там и для чего, можете просто отвечать Да, вбивая 2.
В этой команде и последующих *** это ваш путь до директории /root/ на флешке с Entware. Полную команду вы могли видеть в консоли в конце установки (пункт II).

V. Команды управления скриптом.
1.В консоли роутера для перенастройки скрипта выполнить:
***/sing-box/sing-box.sh setup
Для старта sing-box выполнить:
***/sing-box/sing-box.sh start
Для остановки sing-box выполнить:
***/sing-box/sing-box.sh stop
Для перезапуска sing-box выполнить:
/***/sing-box/sing-box.sh restart
2.Режим настройки скрипта (***/sing-box/sing-box.sh setup) не влияет на текущую сессию работы sing-box. Для начала работы sing-box с новыми настройками скрипта, запустите его (***/sing-box/sing-box.sh start) или перезапустите (***/sing-box/sing-box.sh restart), если он уже запущен. Если внесены изменения в конфиг, то сначала запустите скрипт в режиме настройки, чтобы при необходимости внести изменения, после запустите скрипт или перезапустите, если он уже запущен.
3.После выполнения команды
/mnt/entware/entware/root/sing-box/sing-box.sh start
или
/mnt/entware/entware/root/sing-box/sing-box.sh restart
скрипт корректно работает, пока не закроете консоль. Поэтому после старта или рестарта скрипта и закрытия консоли перезагрузите роутер, тогда скрипт самостоятельно запустится после перезагрузки роутера и будет корректно работать без консоли.
4.Если хотите полностью остановить работу скрипта и не хотите чтобы скрипт самостоятельно запускался при перезагрузке роутера, то выполните в консоли команду
/mnt/entware/entware/root/sing-box/sing-box.sh stop
После этой команды перезагрузка роутера не требуется.

V. Полное удаление скрипта.
В консоли роутера выполните команду:
***/sing-box/sing-box.sh stop
После этого удалите директорию /mnt/entware/entware/root/sing-box с помощью команды:
rm -r ***/sing-box
и, если не удалили ранее, то удалите архив sing-box-script.tar.gz
rm ***/sing-box-script.tar.gz