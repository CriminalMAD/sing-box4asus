Скрипт для запуска sing-box на роутерах Asus с прошивкой Мерлина.

I. Нюансы.
1.Вы должны уметь составлять, ну или хотя бы править под себя конфиги для sing-box. Документация https://sing-box.sagernet.org/. Шаблон моего конфига устанавливается вместе со скриптом sing-box.
2.Прописывание DNS серверов в конфиге для роутера ломает правила маршрутизации, прописанные в данном конфиге. Но, у меня нормально работает и без прописывания DNS серверов- используется dns, настроенный в роутере.
3.У вас в роутере должна быть примонтированная флешка с установленным на ней Entware, куда мы будем ставить sing-box со всем необходимым. Установка во внутреннюю память роутера не желательна, а часто и невозможна из-за её ограничений, и не рассматривается.
4.Можете экспериментировать со скриптом и конфигами. Если добьётесь заслуживающих внимания успехов, например победите указанные выше нюансы, поделитесь ими со мной https://4pda.to/forum/index.php?showuser=1525408, пожалуйста.

II. Установка sing-box.
Выполните в консоли роутера команду:
wget -O /jffs/scripts/sb-script-install-ru https://raw.githubusercontent.com/Dr4tez/sing-box4asus/main/sb-script-install-ru && chmod 775 /jffs/scripts/sb-script-install-ru && /jffs/scripts/sb-script-install-ru
В конце установки выводятся указания по дальнейшим действиям.

III. Что изменить вручную перед первоначальной настройкой скрипта sing-box.
1.После установки sing-box, у вас появилась директория /jffs/addons/sing-box, в которой есть шаблон моего конфига config.json. Прежде чем запускать первоначальную настройку скрипта sing-box, вы, как минимум, должны вписать в поля с иксами шаблона конфига свои значения, или вообще заменить конфиг на свой, с учётом указанных выше нюансов. Обратите внимание, что в моём шаблоне используется мой личный рулсет, загружаемый с моей страницы гитхаба (https://github.com/Dr4tez/my_domains), в нём может не быть нужных вам заблокированных доменов, а трафик по умолчанию идёт в директ.
2.По умолчанию устанавливается последний стабильный релиз sing-box. Если хотите другую версию, можете заменить файл sing-box в директории /opt/root/sing-box на нужный вам, только не забудьте дать ему права на выполнение и, при необходимости, изменить конфиг согласно разделу Migration (https://sing-box.sagernet.org/migration/) в документации sing-box.

IV. Первоначальная настройка скрипта.
Перед первым стартом sing-box, после выполнения предыдущих пунктов, обязательно выполните настройку скрипта! Для этого необходимо запустить в консоли роутера команду
sbs setup
В поле ввода ip адресов устройств обязательно вбейте свои. Номер таблицы маршрутизации можете оставить существующий 555.

V. Команды управления.
Если хотите полностью остановить работу скрипта и не хотите чтобы скрипт самостоятельно запускался при перезагрузке роутера, то выполните в консоли команду
sbs stop
Полный список команд с их описанием можете увидеть выполнив в консоли команду sbs
